if($(".datatable").length>0){var table=$(".datatable:not(#puantajTable)").DataTable({autoWidth:false,order:false,language:{url:"src/tr.json"},buttons:[{extend:"excelHtml5",className:"d-none",exportOptions:{columns:":visible:not(.no-export)"}}],layout:{bottomStart:"pageLength",bottom2Start:"info",topStart:null,topEnd:null},initComplete:function(e,t){var n=this.api();var a=e.sTableId;$("#"+a+" thead").append('<tr class="search-input-row"></tr>');n.columns().every(function(){let t=this;let n=t.header().textContent;if(n!="İşlem"){let e=document.createElement("input");e.placeholder=n;e.classList.add("form-control");e.classList.add("form-control-sm");e.setAttribute("autocomplete","off");$("#"+a+" .search-input-row").append($('<th class="search">').append(e));$(e).on("keyup change",function(){if(t.search()!==this.value){t.search(this.value).draw()}})}else{$("#"+a+" .search-input-row").append("<th></th>")}})}});$("#export_excel").on("click",function(){table.button(".buttons-excel").trigger()});var puantaj_table=$("#puantajTable").DataTable({ordering:false,language:{url:"src/tr.json"},buttons:[{extend:"excelHtml5",className:"d-none",exportOptions:{columns:":visible:not(.no-export)"}}]});$("#export_excel_puantaj").on("click",function(){puantaj_table.button(".buttons-excel").trigger()})}if($(".select2").length>0){$(".select2").select2();$("#products").select2({dropdownParent:$(".modal")});$(".modal .select2").select2({dropdownParent:$(".modal")});$("#amount_money").select2({dropdownParent:$(".modal")});$("#wage_cut_month, #wage_cut_year,#income_month, #income_year, #payment_month, #payment_year").select2({dropdownParent:$(".modal")})}$(document).ready(function(){if($(".summernote").length>0){var e=$(window).height()*.37;$(".summernote").summernote({height:e,callbacks:{onInit:function(){$(".summernote").summernote("height",e)}}})}});if($(".flatpickr").length>0){$(".flatpickr").flatpickr({dateFormat:"d.m.Y",locale:"tr"})}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}$(document).on("click",".route-link",function(){var e=$(this).data("page");var t="index.php?p="+e;window.location=t});if($(".select2").length>0){$(".select2.islem").select2({tags:true})}function dtSearchInput(e,t,n){}function deleteRecord(e=this,t=null,n="Kayıt silinecektir!",a="/api/ajax.php"){var o=$(e).closest("tr");var r=$(e).closest("table")[0].id;var i=$("#"+r).DataTable();var l=i.row(o);var s=$(e).data("id");const c=new FormData;c.append("action",t);c.append("id",s);AlertConfirm(n).then(e=>{fetch(a,{method:"POST",body:c}).then(e=>e.json()).then(t=>{if(t.status=="success"){title="Başarılı!";icon="success"}else{title="Hata!";icon="error"}Swal.fire({title:title,text:t.message,icon:icon}).then(e=>{if(e.isConfirmed){if(t.status=="success")l.remove().draw(false);return t}})}).catch(e=>alert("Error deleting : "+e))})}async function deleteRecordByReturn(e,t=null,n="Kayıt silinecektir!",a="/api/ajax.php"){var o=$(e).closest("tr");var r=$(e).closest("table")[0].id;var i=$("#"+r).DataTable();var l=i.row(o);var s=$(e).data("id");const c=new FormData;c.append("action",t);c.append("id",s);const u=await AlertConfirm(n);if(u){try{const d=await fetch(a,{method:"POST",body:c});const m=await d.json();let e,t;if(m.status=="success"){e="Başarılı!";t="success"}else{e="Hata!";t="error"}await Swal.fire({title:e,text:m.message,icon:t});if(m.status=="success"){l.remove().draw(false)}return m}catch(e){console.error("Error deleting:",e);return{status:"error",message:"Bir hata oluştu."}}}}function AlertConfirm(e="Emin misiniz?"){return new Promise((t,n)=>{Swal.fire({title:"Emin misiniz?",text:e,icon:"warning",showCancelButton:true,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Evet, Sil!"}).then(e=>{if(e.isConfirmed){t(true)}else{n(false)}})})}$(document).on("change","#myFirm",function(){var e=new URLSearchParams(window.location.search).get("p");window.location="set-session.php?p="+e+"&firm_id="+$(this).val()});function fadeOut(e,t){var n=1;var a=50;var o=a/t;function r(){n-=o;if(n<=0){n=0;e.style.display="none";clearInterval(i)}e.style.opacity=n}var i=setInterval(r,a)}function getTowns(e,n){let t=new FormData;t.append("city_id",e);t.append("action","getTowns");fetch("/api/il-ilce.php",{method:"POST",body:t}).then(e=>e.json()).then(e=>{let t=e.towns;$(n).html(t)}).catch(e=>{console.error("Error:",e)})}function checkPersonId(e){if(e==0){swal.fire({title:"Hata",icon:"warning",text:"Öncelikle personeli kaydetmeniz gerekir!"});return false}return true}function checkId(e,t){if(e==0){swal.fire({title:"Hata",icon:"warning",text:"Öncelikle "+t+" kaydetmeniz gerekir!"});return false}return true}